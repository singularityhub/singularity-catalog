Bootstrap: docker
From: nvcr.io/nvidia/pytorch:23.09-py3

%files
requirements_factorySim.txt /workspace/factorySim/

%post
cd /workspace/factorySim

apt-get update && apt-get install -y --no-install-recommends \
build-essential \
libcairo2-dev \
pkg-config \
python3-dev \
ffmpeg \
bash-completion \

python3 -m pip install --upgrade pip
python3 -m pip install --no-cache-dir -U -r requirements_factorySim.txt
python3 -m pip install --no-cache-dir -U lark
python3 -m pip install --no-cache-dir -U typing_extensions



%environment
    export PYTHONPATH=$HOME/factorySim/env:$HOME/gitRepo/factorySim/env

%runscript
cd $HOME/factorySim
python3 -u train.py "$SLURM_CPUS_PER_TASK"

%startscript
cd $HOME/factorySim
python3 -u train.py "$SLURM_CPUS_PER_TASK"

